.board {
  display: grid;
  width: 100vw;
  height: 100dvh;
  gap: 5px;
  padding: 5px;
  background: #111;
  touch-action: none;
  user-select: none;
  -webkit-user-select: none;
}

/* ---- Tile (default: dark) ---- */
.tile {
  position: relative;
  background: #111;
  border-radius: 5px;
  overflow: visible;
  cursor: grab;
  container-type: size;
}

.tile:active {
  cursor: grabbing;
}

/* ---- Half display (static background) ---- */
.half {
  position: absolute;
  left: 0;
  right: 0;
  height: calc(50% - 1.5px);
  overflow: hidden;
}

.upper {
  top: 0;
  background: #1a1a1a;
  border-radius: 5px 5px 0 0;
}

.lower {
  bottom: 0;
  background: #1a1a1a;
  border-radius: 0 0 5px 5px;
}

/* Text wrapper: 200% of the half = 100% of tile */
.half-text {
  position: absolute;
  left: 0;
  right: 0;
  height: 200%;
  display: flex;
  align-items: center;
  justify-content: center;
}

.upper .half-text {
  top: 0;
}

.lower .half-text {
  bottom: 0;
}

.half-text span {
  font-family: 'Alternate Gothic', 'Helvetica Neue', 'Arial', sans-serif;
  font-weight: normal;
  font-size: min(144cqi, 156cqb);
  text-transform: uppercase;
  color: #f0f0f0;
  line-height: 1;
  font-feature-settings: 'tnum';
  transform: translateY(4%);
}

/* ---- Inverted (tap toggle â†’ white) ---- */
.tile.inverted {
  background: #e8e8e8;
}

.tile.inverted .upper {
  background: linear-gradient(to bottom, #fff 0%, #fafafa 70%, #f3f3f3 100%);
}

.tile.inverted .lower {
  background: linear-gradient(to bottom, #ebebeb 0%, #f2f2f2 30%, #fafafa 100%);
}

.tile.inverted .half-text span {
  color: #111;
}

.tile.inverted .flap-top {
  background: linear-gradient(to bottom, #fff 0%, #fafafa 70%, #f3f3f3 100%);
}

.tile.inverted .flap-bottom {
  background: linear-gradient(to bottom, #ebebeb 0%, #f2f2f2 30%, #fafafa 100%);
}

/* ---- Split: axle rod ---- */
.split-line {
  position: absolute;
  left: -1px;
  right: -1px;
  top: 50%;
  height: 3px;
  transform: translateY(-50%);
  z-index: 20;
  pointer-events: none;
  background: #111;
  border-radius: 1px;
}

/* ---- Axle pins: side-view of cylinder = rectangle ---- */
.pin {
  position: absolute;
  top: 50%;
  width: 8px;
  height: 4px;
  border-radius: 1px;
  transform: translateY(-50%);
  z-index: 30;
  pointer-events: none;
  background: #111;
}

.pin-l {
  left: -6px;
}

.pin-r {
  right: -6px;
}

/* ---- Animated flaps ---- */
.flap {
  position: absolute;
  left: 0;
  right: 0;
  height: calc(50% - 1.5px);
  overflow: hidden;
  z-index: 10;
}

.flap-top {
  top: 0;
  background: #1a1a1a;
  border-radius: 5px 5px 0 0;
  transform-origin: bottom center;
  animation: flapDown 0.25s ease-in forwards;
}

.flap-top .half-text {
  top: 0;
}

.flap-bottom {
  bottom: 0;
  background: #1a1a1a;
  border-radius: 0 0 5px 5px;
  transform-origin: top center;
  animation: flapUp 0.25s ease-out 0.12s both;
}

.flap-bottom .half-text {
  bottom: 0;
}

/* ---- Fast chain flips ---- */
.flap-top.fast {
  animation-duration: 0.08s;
}

.flap-bottom.fast {
  animation-duration: 0.08s;
  animation-delay: 0.03s;
}

@keyframes flapDown {
  0% {
    transform: perspective(600px) rotateX(0deg);
  }
  100% {
    transform: perspective(600px) rotateX(-90deg);
  }
}

@keyframes flapUp {
  0% {
    transform: perspective(600px) rotateX(90deg);
  }
  100% {
    transform: perspective(600px) rotateX(0deg);
  }
}
